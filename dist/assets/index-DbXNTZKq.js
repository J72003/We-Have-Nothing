var m=Object.defineProperty;var g=(r,t,e)=>t in r?m(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var h=(r,t,e)=>g(r,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(s){if(s.ep)return;s.ep=!0;const c=e(s);fetch(s.href,c)}})();class p{constructor(){h(this,"canvas");h(this,"ctx");h(this,"gameState");h(this,"BOARD_SIZE",19);h(this,"CELL_SIZE",25);h(this,"STONE_RADIUS",10);this.canvas=document.getElementById("gameCanvas"),this.ctx=this.canvas.getContext("2d");const t=this.CELL_SIZE*(this.BOARD_SIZE+1);this.canvas.width=t,this.canvas.height=t,this.gameState={board:Array(this.BOARD_SIZE).fill(null).map(()=>Array(this.BOARD_SIZE).fill(null)),currentPlayer:"black",blackScore:0,whiteScore:0},this.setupEventListeners(),this.draw(),this.updateUI()}setupEventListeners(){var t,e;this.canvas.addEventListener("click",i=>{const s=this.canvas.getBoundingClientRect(),c=i.clientX-s.left,a=i.clientY-s.top,n=Math.round((c-this.CELL_SIZE/2)/this.CELL_SIZE),o=Math.round((a-this.CELL_SIZE/2)/this.CELL_SIZE);this.placeStone(o,n)}),(t=document.getElementById("newGame"))==null||t.addEventListener("click",()=>{this.newGame()}),(e=document.getElementById("pass"))==null||e.addEventListener("click",()=>{this.pass()})}placeStone(t,e){t<0||t>=this.BOARD_SIZE||e<0||e>=this.BOARD_SIZE||this.gameState.board[t][e]===null&&(this.gameState.board[t][e]=this.gameState.currentPlayer,this.checkCaptures(t,e),this.switchPlayer(),this.draw(),this.updateUI())}checkCaptures(t,e){const i=this.gameState.currentPlayer==="black"?"white":"black",s=[[-1,0],[1,0],[0,-1],[0,1]];for(const[c,a]of s){const n=t+c,o=e+a;if(this.isValidPosition(n,o)&&this.gameState.board[n][o]===i){const l=this.getGroup(n,o);this.hasNoLiberties(l)&&this.captureGroup(l)}}}getGroup(t,e){const i=this.gameState.board[t][e],s=new Set,c=[],a=[[t,e]];for(;a.length>0;){const[n,o]=a.pop(),l=`${n},${o}`;if(s.has(l))continue;s.add(l),c.push([n,o]);const u=[[-1,0],[1,0],[0,-1],[0,1]];for(const[f,E]of u){const d=n+f,S=o+E;this.isValidPosition(d,S)&&this.gameState.board[d][S]===i&&!s.has(`${d},${S}`)&&a.push([d,S])}}return c}hasNoLiberties(t){const e=[[-1,0],[1,0],[0,-1],[0,1]];for(const[i,s]of t)for(const[c,a]of e){const n=i+c,o=s+a;if(this.isValidPosition(n,o)&&this.gameState.board[n][o]===null)return!1}return!0}captureGroup(t){const e=this.gameState.board[t[0][0]][t[0][1]];for(const[i,s]of t)this.gameState.board[i][s]=null;e==="black"?this.gameState.whiteScore+=t.length:this.gameState.blackScore+=t.length}isValidPosition(t,e){return t>=0&&t<this.BOARD_SIZE&&e>=0&&e<this.BOARD_SIZE}switchPlayer(){this.gameState.currentPlayer=this.gameState.currentPlayer==="black"?"white":"black"}pass(){this.switchPlayer(),this.updateUI()}newGame(){this.gameState={board:Array(this.BOARD_SIZE).fill(null).map(()=>Array(this.BOARD_SIZE).fill(null)),currentPlayer:"black",blackScore:0,whiteScore:0},this.draw(),this.updateUI()}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawBoard(),this.drawStones()}drawBoard(){this.ctx.fillStyle="#D4A574",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.strokeStyle="#8B4513",this.ctx.lineWidth=1;for(let e=0;e<this.BOARD_SIZE;e++){const i=(e+.5)*this.CELL_SIZE;this.ctx.beginPath(),this.ctx.moveTo(i,this.CELL_SIZE/2),this.ctx.lineTo(i,this.canvas.height-this.CELL_SIZE/2),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(this.CELL_SIZE/2,i),this.ctx.lineTo(this.canvas.width-this.CELL_SIZE/2,i),this.ctx.stroke()}const t=[3,9,15];this.ctx.fillStyle="#8B4513";for(const e of t)for(const i of t){const s=(i+.5)*this.CELL_SIZE,c=(e+.5)*this.CELL_SIZE;this.ctx.beginPath(),this.ctx.arc(s,c,3,0,2*Math.PI),this.ctx.fill()}}drawStones(){for(let t=0;t<this.BOARD_SIZE;t++)for(let e=0;e<this.BOARD_SIZE;e++){const i=this.gameState.board[t][e];if(i){const s=(e+.5)*this.CELL_SIZE,c=(t+.5)*this.CELL_SIZE;this.ctx.beginPath(),this.ctx.arc(s,c,this.STONE_RADIUS,0,2*Math.PI),i==="black"?this.ctx.fillStyle="#2C2C2C":this.ctx.fillStyle="#F5F5F5",this.ctx.fill(),this.ctx.strokeStyle="#666",this.ctx.lineWidth=1,this.ctx.stroke()}}}updateUI(){const t=document.getElementById("currentPlayer"),e=document.getElementById("blackScore"),i=document.getElementById("whiteScore");t&&(t.textContent=this.gameState.currentPlayer==="black"?"Black":"White",t.className=`current-player ${this.gameState.currentPlayer}`),e&&(e.textContent=this.gameState.blackScore.toString()),i&&(i.textContent=this.gameState.whiteScore.toString())}}document.addEventListener("DOMContentLoaded",()=>{new p});
